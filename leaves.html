<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>Branches + Leaves (Clustered Realism)</title>

<style>
html, body {
  margin: 0;
  height: 100%;
  width: 100%;
  background: transparent;
  overflow: hidden;
}
svg {
  position: absolute;
  bottom: 35%;
  left: 0;
  width: 100%;
  height: 65%;
}
path {
  fill: none;
  stroke: #120a04;
  stroke-width: 4;
  stroke-linecap: round;
}
ellipse {
  opacity: 0.9;
}
</style>
</head>

<body>
<svg id="tree"></svg>

<script>
const svg = document.getElementById("tree");
const width = window.innerWidth;
const height = window.innerHeight;
const baseX = width / 2;
const baseY = height * 0.65;

function rand(min, max) { return Math.random() * (max - min) + min; }

const colors = ["#a0522d","#b87333","#cd853f","#d2691e","#ff8c00","#c04000","#804000"];

function drawLeafCluster(x, y, clusterSize) {
  for (let i = 0; i < clusterSize; i++) {
    const rx = rand(3, 6);
    const ry = rand(6, 9);
    const offsetX = rand(-10, 10);
    const offsetY = rand(-10, 10);
    const rotation = rand(0, 360);
    const color = colors[Math.floor(rand(0, colors.length))];
    const leaf = document.createElementNS("http://www.w3.org/2000/svg", "ellipse");
    leaf.setAttribute("cx", x + offsetX);
    leaf.setAttribute("cy", y + offsetY);
    leaf.setAttribute("rx", rx);
    leaf.setAttribute("ry", ry);
    leaf.setAttribute("fill", color);
    leaf.setAttribute("transform", `rotate(${rotation} ${x + offsetX} ${y + offsetY})`);
    svg.appendChild(leaf);
  }
}

const branchCount = Math.floor(rand(5, 8));

for (let i = 0; i < branchCount; i++) {
  const startY = baseY - rand(height * 0.05, height * 0.3);
  const startX = baseX + rand(-5, 5);
  const endX = baseX + rand(-width * 0.25, width * 0.25);
  const endY = startY - rand(height * 0.05, height * 0.2);
  const curveX = (startX + endX) / 2 + rand(-50, 50);
  const curveY = (startY + endY) / 2 - rand(50, 100);

  const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
  path.setAttribute("d", `M ${startX},${startY} Q ${curveX},${curveY} ${endX},${endY}`);
  svg.appendChild(path);

  const clusterCount = Math.floor(rand(8, 14));
  for (let j = 0; j < clusterCount; j++) {
    const offsetX = rand(-50, 50);
    const offsetY = rand(-50, 50);
    drawLeafCluster(endX + offsetX, endY + offsetY, Math.floor(rand(3, 7)));
  }
}
</script>
</body>
</html>
